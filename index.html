<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>IlmPlay — Safe Islamic Videos for Kids</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#f0f8ff;--card:#fff;--text:#0b1720;--accent:#2a9d8f;--accent2:#ff8c42;--heading:#ff9900;--muted:#6b7280;--indicator-bg:#e5e7eb;--indicator-fg:#111;--divider-height:6px}
[data-theme=dark]{--bg:#12061f;--card:#1f1030;--text:#f1f5f9;--accent:#ffd93d;--accent2:#ff6b6b;--muted:#bbb;--indicator-bg:#374151;--indicator-fg:#fff}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{font-family:"Baloo 2",cursive;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;transition:background .18s,color .18s}
header{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:12px 16px;background:var(--card);box-shadow:0 6px 18px rgba(0,0,0,.08);z-index:200;transition:transform .18s ease,padding .18s ease;will-change:transform}
.left{display:flex;gap:14px;align-items:center;min-width:0}
.logo img{height:200px;width:auto;display:block;transition:height .18s ease,transform .18s ease}
.brand{font-weight:900;font-size:34px;color:var(--accent);transition:font-size .18s ease}
nav{display:grid;grid-template-columns:repeat(4,auto);gap:12px;margin-left:12px;justify-items:center}
nav a{background:var(--heading);color:#fff;padding:8px 14px;border-radius:12px;font-weight:800;text-decoration:none;cursor:pointer;transition:all .18s}
#themeToggle{background:var(--accent2);color:#fff;border:0;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:800;transition:all .18s}
.hero{margin:8px 8px 18px 8px;padding:12px;border-radius:12px;text-align:center;background:linear-gradient(135deg,#c8e6c9,#fffde7);transition:all .18s}
[data-theme=dark] .hero{background:linear-gradient(135deg,#2a1b3c,#12061f)}
.hero h1{font-size:24px;color:var(--accent)}
.hero p{color:var(--muted);margin-top:6px}
main{padding:14px;max-width:1280px;margin:0 auto;transition:padding-top .12s}
.page{display:none}.page.active{display:block}
.sectionTitle{display:inline-block;background:var(--heading);color:#fff;padding:10px 12px;border-radius:12px;font-weight:800;margin-bottom:12px}
.tile-row{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;padding:14px 0;border-bottom:8px solid var(--heading);align-items:stretch}
.tiles>.tile-row:last-child{border-bottom:none}
.tile{aspect-ratio:16/9;overflow:hidden;background:var(--card);border:4px solid rgba(0,0,0,.06);border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,0.12);cursor:pointer;transition:transform .14s,border-color .18s,box-shadow .18s;display:flex;flex-direction:column}
.tile:hover{transform:translateY(-6px);border-color:var(--accent);box-shadow:0 10px 28px rgba(0,0,0,0.16)}
.tile img{width:100%;height:100%;object-fit:cover;display:block}
.tile-row.scrollable{display:flex;flex-wrap:nowrap;overflow-x:auto;gap:12px;padding-bottom:6px;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch}
.tile-row.scrollable::-webkit-scrollbar{display:none}
.tile-row.scrollable .tile{flex:0 0 calc(50% - 6px);scroll-snap-align:start}
@media (min-width:821px){.tile-row{display:flex !important;flex-wrap:nowrap;overflow-x:auto;gap:12px;padding-bottom:12px;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;align-items:stretch}.tile-row .tile{flex:0 0 calc((100% - 36px)/4);scroll-snap-align:start;min-width:0}.tile-row-wrapper{margin-bottom:8px}}
.scroll-indicator{display:flex;justify-content:center;gap:10px;margin-top:8px;margin-bottom:8px;align-items:center}
.scroll-indicator button{background:var(--indicator-bg);color:var(--indicator-fg);border:0;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;cursor:pointer;opacity:.95;box-shadow:0 4px 10px rgba(0,0,0,0.06);transition:transform .12s,opacity .12s}
.scroll-indicator button:active{transform:scale(.96)}
.scroll-indicator button:disabled{opacity:.45;cursor:default}
@media (max-width:720px) and (orientation:portrait){body.portrait-mobile header{flex-direction:column;align-items:center}.portrait-mobile .left{order:0;margin-bottom:6px}.portrait-mobile #themeToggle{order:2;margin-top:8px;align-self:center}.portrait-mobile nav{order:1;margin-top:8px;display:grid;grid-template-columns:repeat(2,1fr);gap:10px;width:100%;max-width:460px;padding:0 8px;justify-items:stretch}.portrait-mobile nav a{width:100%;text-align:center}.portrait-mobile .tile-row{display:grid;grid-template-columns:1fr;gap:10px;padding:10px 0}.portrait-mobile .tile::after{content:"";display:block;height:var(--divider-height);background:var(--heading);margin-top:8px;border-radius:4px}}
body.landscape-fixed header{position:fixed;left:0;right:0;top:0;z-index:600}
body.landscape-mobile header{display:flex;align-items:center;justify-content:space-between}.landscape-mobile .left{flex:0 0 auto}.landscape-mobile nav{flex:1 1 auto;display:flex;justify-content:center;gap:10px;margin-left:8px;margin-right:8px}.landscape-mobile #themeToggle{order:3;margin-left:auto;flex:0 0 auto}
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.85);z-index:999;padding:16px}.modal.open{display:flex}
.player{width:100%;max-width:980px;background:#000;border-radius:12px;overflow:hidden}
.player iframe{width:100%;height:66vh;border:0}
.controls{display:flex;gap:8px;padding:10px;background:var(--card);align-items:center;justify-content:center}
.btn{background:var(--accent);color:#fff;border:0;padding:8px 12px;border-radius:10px;font-weight:800;cursor:pointer}
.btn.alt{background:#eee;color:#111}.btn.yt{background:var(--accent2)}
footer{padding:18px;text-align:center;color:var(--muted);font-size:13px}
</style>
</head>
<body data-theme="light">

<header id="mainHeader">
  <div class="left">
    <div class="logo"><img src="Untitled design(5).png" alt="IlmPlay logo" id="logoImg"></div>
    <div>
      <div class="brand" id="brandText">IlmPlay</div>
      <div style="font-size:12px;color:var(--muted)">Safe, Islamic videos for kids 4–11</div>
    </div>
  </div>
  <nav id="mainNav">
    <a href="#" onclick="show('Stories')">Stories</a>
    <a href="#" onclick="show('Nasheeds')">Nasheeds</a>
    <a href="#" onclick="show('Duas')">Duas</a>
    <a href="#" onclick="show('Cartoons')">Cartoons</a>
  </nav>
  <button id="themeToggle">🌙</button>
</header>

<main id="mainContent">
  <section class="hero"><h1>Welcome to IlmPlay</h1><p>Choose a section, pick a video and enjoy today — safe content for kids</p></section>
  <section id="Stories" class="page active"><div class="sectionTitle">Stories</div><div class="tiles" id="t-Stories"></div></section>
  <section id="Nasheeds" class="page"><div class="sectionTitle">Nasheeds</div><div class="tiles" id="t-Nasheeds"></div></section>
  <section id="Duas" class="page"><div class="sectionTitle">Duas</div><div class="tiles" id="t-Duas"></div></section>
  <section id="Cartoons" class="page"><div class="sectionTitle">Cartoons</div><div class="tiles" id="t-Cartoons"></div></section>
</main>

<footer>© IlmPlay — Safe Islamic Videos for Kids</footer>

<div id="modal" class="modal" aria-hidden="true">
  <div class="player">
    <iframe id="playerFrame" src="" allow="autoplay; fullscreen; picture-in-picture"></iframe>
    <div class="controls">
      <button class="btn" onclick="closePlayer()">Close</button>
      <button class="btn alt" id="reportBtn">Report</button>
    </div>
  </div>
</div>

<script>
const VIDEOS={
  Stories:[
    {type:'local',file:'Stories Section/story1.mp4',thumb:'Stories Section/story1.jpg'},
    {type:'local',file:'Stories Section/story2.mp4',thumb:'Stories Section/story2.jpg'},
    {type:'local',file:'Stories Section/story3.mp4',thumb:'Stories Section/story3.jpg'},
    {type:'local',file:'Stories Section/story4.mp4',thumb:'Stories Section/story4.jpg'},
    {type:'local',file:'Stories Section/story5.mp4',thumb:'Stories Section/story5.jpg'},
    {type:'local',file:'Stories Section/story6.mp4',thumb:'Stories Section/story6.jpg'},

    {type:'local',file:'Stories Section/story7.mp4',thumb:'Stories Section/story7.jpeg'},
    {type:'local',file:'Stories Section/story8.mp4',thumb:'Stories Section/story8.jpeg'},
    {type:'local',file:'Stories Section/story9.mp4',thumb:'Stories Section/story9.jpeg'},
    {type:'local',file:'Stories Section/story10.mp4',thumb:'Stories Section/story10.jpeg'},
    {type:'local',file:'Stories Section/story11.mp4',thumb:'Stories Section/story11.jpeg'},
    {type:'local',file:'Stories Section/story12.mp4',thumb:'Stories Section/story12.jpeg'},


    {type:'local',file:'Stories Section/story13.mp4',thumb:'Stories Section/story13.jpeg'},
    {type:'local',file:'Stories Section/story14.mp4',thumb:'Stories Section/story14.jpeg'},
    {type:'local',file:'Stories Section/story15.mp4',thumb:'Stories Section/story15.jpeg'},
    {type:'local',file:'Stories Section/story16.mp4',thumb:'Stories Section/story16.jpeg'},
    {type:'local',file:'Stories Section/story17.mp4',thumb:'Stories Section/story17.jpeg'},
    {type:'local',file:'Stories Section/story18.mp4',thumb:'Stories Section/story18.jpeg'},


    {type:'local',file:'Stories Section/story19.mp4',thumb:'Stories Section/story19.jpeg'},
    {type:'local',file:'Stories Section/story20.mp4',thumb:'Stories Section/story20.jpeg'},
    {type:'local',file:'Stories Section/story21.mp4',thumb:'Stories Section/story21.jpeg'},
    {type:'local',file:'Stories Section/story22.mp4',thumb:'Stories Section/story22.jpeg'},
    {type:'local',file:'Stories Section/story23.mp4',thumb:'Stories Section/story23.jpeg'},
    {type:'local',file:'Stories Section/story24.mp4',thumb:'Stories Section/story24.jpeg'},


    {type:'local',file:'Stories Section/story25.mp4',thumb:'Stories Section/story25.jpeg'},
    {type:'local',file:'Stories Section/story26.mp4',thumb:'Stories Section/story26.jpeg'},
    {type:'local',file:'Stories Section/story27.mp4',thumb:'Stories Section/story27.jpeg'},
    {type:'local',file:'Stories Section/story28.mp4',thumb:'Stories Section/story28.jpeg'},
    {type:'local',file:'Stories Section/story29.mp4',thumb:'Stories Section/story29.jpeg'},
    {type:'local',file:'Stories Section/story30.mp4',thumb:'Stories Section/story30.jpeg'},

    {type:'local',file:'Stories Section/story31.mp4',thumb:'Stories Section/story31.jpeg'},
    {type:'local',file:'Stories Section/story32.mp4',thumb:'Stories Section/story32.jpeg'},
  ],
  Nasheeds:[     
    
    {type:'local',file:'Nasheeds Section/nasheed1.mp4',thumb:'Nasheeds Section/nasheed1.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed2.mp4',thumb:'Nasheeds Section/nasheed2.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed3.mp4',thumb:'Nasheeds Section/nasheed3.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed4.mp4',thumb:'Nasheeds Section/nasheed4.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed5.mp4',thumb:'Nasheeds Section/nasheed5.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed6.mp4',thumb:'Nasheeds Section/nasheed6.jpg'},

    {type:'local',file:'Nasheeds Section/nasheed7.mp4',thumb:'Nasheeds Section/nasheed7.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed8.mp4',thumb:'Nasheeds Section/nasheed8.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed9.mp4',thumb:'Nasheeds Section/nasheed9.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed10.mp4',thumb:'Nasheeds Section/nasheed10.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed11.mp4',thumb:'Nasheeds Section/nasheed11.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed12.mp4',thumb:'Nasheeds Section/nasheed12.jpg'},

    {type:'local',file:'Nasheeds Section/nasheed13.mp4',thumb:'Nasheeds Section/nasheed13.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed14.mp4',thumb:'Nasheeds Section/nasheed14.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed15.mp4',thumb:'Nasheeds Section/nasheed15.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed16.mp4',thumb:'Nasheeds Section/nasheed16.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed17.mp4',thumb:'Nasheeds Section/nasheed17.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed18.mp4',thumb:'Nasheeds Section/nasheed18.jpg'},

    {type:'local',file:'Nasheeds Section/nasheed19.mp4',thumb:'Nasheeds Section/nasheed19.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed20.mp4',thumb:'Nasheeds Section/nasheed20.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed21.mp4',thumb:'Nasheeds Section/nasheed21.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed22.mp4',thumb:'Nasheeds Section/nasheed22.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed23.mp4',thumb:'Nasheeds Section/nasheed23.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed24.mp4',thumb:'Nasheeds Section/nasheed24.jpg'},

    {type:'local',file:'Nasheeds Section/nasheed25.mp4',thumb:'Nasheeds Section/nasheed25.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed26.mp4',thumb:'Nasheeds Section/nasheed26.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed27.mp4',thumb:'Nasheeds Section/nasheed27.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed28.mp4',thumb:'Nasheeds Section/nasheed28.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed29.mp4',thumb:'Nasheeds Section/nasheed29.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed30.mp4',thumb:'Nasheeds Section/nasheed30.jpg'},

    {type:'local',file:'Nasheeds Section/nasheed31.mp4',thumb:'Nasheeds Section/nasheed31.jpg'},
    {type:'local',file:'Nasheeds Section/nasheed32.mp4',thumb:'Nasheeds Section/nasheed32.jpg'},
],
  Duas:[
    {type:'local',file:'Duas Section/dua1.mp4',thumb:'Duas Section/dua1.jpg'},
    {type:'local',file:'Duas Section/dua2.mp4',thumb:'Duas Section/dua2.jpg'},
{type:'local',file:'Duas Section/dua3.mp4',thumb:'Duas Section/dua3.jpg'},
{type:'local',file:'Duas Section/dua4.mp4',thumb:'Duas Section/dua4.jpg'},
{type:'local',file:'Duas Section/dua5.mp4',thumb:'Duas Section/dua5.jpg'},
{type:'local',file:'Duas Section/dua6.mp4',thumb:'Duas Section/dua6.jpg'},
{type:'local',file:'Duas Section/dua7.mp4',thumb:'Duas Section/dua7.jpg'},

{type:'local',file:'Duas Section/dua8.mp4',thumb:'Duas Section/dua8.jpg'},
{type:'local',file:'Duas Section/dua9.mp4',thumb:'Duas Section/dua9.jpg'},
{type:'local',file:'Duas Section/dua10.mp4',thumb:'Duas Section/dua10.jpg'},
{type:'local',file:'Duas Section/dua11.mp4',thumb:'Duas Section/dua11.jpg'},
{type:'local',file:'Duas Section/dua12.mp4',thumb:'Duas Section/dua12.jpg'},
{type:'local',file:'Duas Section/dua13.mp4',thumb:'Duas Section/dua13.jpg'},

{type:'local',file:'Duas Section/dua14.mp4',thumb:'Duas Section/dua14.jpg'},
{type:'local',file:'Duas Section/dua15.mp4',thumb:'Duas Section/dua15.jpg'},
{type:'local',file:'Duas Section/dua16.mp4',thumb:'Duas Section/dua16.jpg'},
{type:'local',file:'Duas Section/dua17.mp4',thumb:'Duas Section/dua17.jpg'},
{type:'local',file:'Duas Section/dua18.mp4',thumb:'Duas Section/dua18.jpg'},
{type:'local',file:'Duas Section/dua19.mp4',thumb:'Duas Section/dua19.jpg'},

{type:'local',file:'Duas Section/dua20.mp4',thumb:'Duas Section/dua20.jpg'},
{type:'local',file:'Duas Section/dua21.mp4',thumb:'Duas Section/dua21.jpg'},
{type:'local',file:'Duas Section/dua22.mp4',thumb:'Duas Section/dua22.jpg'},
{type:'local',file:'Duas Section/dua23.mp4',thumb:'Duas Section/dua23.jpg'},
{type:'local',file:'Duas Section/dua24.mp4',thumb:'Duas Section/dua24.jpg'},
{type:'local',file:'Duas Section/dua25.mp4',thumb:'Duas Section/dua25.jpg'},

{type:'local',file:'Duas Section/dua26.mp4',thumb:'Duas Section/dua26.jpg'},
{type:'local',file:'Duas Section/dua27.mp4',thumb:'Duas Section/dua27.jpg'},
{type:'local',file:'Duas Section/dua28.mp4',thumb:'Duas Section/dua28.jpg'},
{type:'local',file:'Duas Section/dua29.mp4',thumb:'Duas Section/dua29.jpg'},
{type:'local',file:'Duas Section/dua30.mp4',thumb:'Duas Section/dua30.jpg'},
{type:'local',file:'Duas Section/dua31.mp4',thumb:'Duas Section/dua31.jpg'},

{type:'local',file:'Duas Section/dua32.mp4',thumb:'Duas Section/dua32.jpg'},

    ],
  Cartoons:[
    {type:'local',file:'Cartoons Section/cartoon1.mp4',thumb:'Cartoons Section/cartoon1.jpg'},
{type:'local',file:'Cartoons Section/cartoon2.mp4',thumb:'Cartoons Section/cartoon2.jpg'},
{type:'local',file:'Cartoons Section/cartoon3.mp4',thumb:'Cartoons Section/cartoon3.jpg'},
{type:'local',file:'Cartoons Section/cartoon4.mp4',thumb:'Cartoons Section/cartoon4.jpg'},
{type:'local',file:'Cartoons Section/cartoon5.mp4',thumb:'Cartoons Section/cartoon5.jpg'},
{type:'local',file:'Cartoons Section/cartoon6.mp4',thumb:'Cartoons Section/cartoon6.jpg'},

{type:'local',file:'Cartoons Section/cartoon7.mp4',thumb:'Cartoons Section/cartoon7.jpg'},
{type:'local',file:'Cartoons Section/cartoon8.mp4',thumb:'Cartoons Section/cartoon8.jpg'},
{type:'local',file:'Cartoons Section/cartoon9.mp4',thumb:'Cartoons Section/cartoon9.jpg'},
{type:'local',file:'Cartoons Section/cartoon10.mp4',thumb:'Cartoons Section/cartoon10.jpg'},
{type:'local',file:'Cartoons Section/cartoon11.mp4',thumb:'Cartoons Section/cartoon11.jpg'},
{type:'local',file:'Cartoons Section/cartoon12.mp4',thumb:'Cartoons Section/cartoon12.jpg'},

{type:'local',file:'Cartoons Section/cartoon13.mp4',thumb:'Cartoons Section/cartoon13.jpg'},
{type:'local',file:'Cartoons Section/cartoon14.mp4',thumb:'Cartoons Section/cartoon14.jpg'},
{type:'local',file:'Cartoons Section/cartoon15.mp4',thumb:'Cartoons Section/cartoon15.jpg'},
{type:'local',file:'Cartoons Section/cartoon16.mp4',thumb:'Cartoons Section/cartoon16.jpg'},
{type:'local',file:'Cartoons Section/cartoon17.mp4',thumb:'Cartoons Section/cartoon17.jpg'},
{type:'local',file:'Cartoons Section/cartoon18.mp4',thumb:'Cartoons Section/cartoon18.jpg'},

{type:'local',file:'Cartoons Section/cartoon19.mp4',thumb:'Cartoons Section/cartoon19.jpg'},
{type:'local',file:'Cartoons Section/cartoon20.mp4',thumb:'Cartoons Section/cartoon20.jpg'},
{type:'local',file:'Cartoons Section/cartoon21.mp4',thumb:'Cartoons Section/cartoon21.jpg'},
{type:'local',file:'Cartoons Section/cartoon22.mp4',thumb:'Cartoons Section/cartoon22.jpg'},
{type:'local',file:'Cartoons Section/cartoon23.mp4',thumb:'Cartoons Section/cartoon23.jpg'},
{type:'local',file:'Cartoons Section/cartoon24.mp4',thumb:'Cartoons Section/cartoon24.jpg'},

{type:'local',file:'Cartoons Section/cartoon25.mp4',thumb:'Cartoons Section/cartoon25.jpg'},
{type:'local',file:'Cartoons Section/cartoon26.mp4',thumb:'Cartoons Section/cartoon26.jpg'},
{type:'local',file:'Cartoons Section/cartoon27.mp4',thumb:'Cartoons Section/cartoon27.jpg'},
{type:'local',file:'Cartoons Section/cartoon28.mp4',thumb:'Cartoons Section/cartoon28.jpg'},
{type:'local',file:'Cartoons Section/cartoon29.mp4',thumb:'Cartoons Section/cartoon29.jpg'},
{type:'local',file:'Cartoons Section/cartoon30.mp4',thumb:'Cartoons Section/cartoon30.jpg'},

{type:'local',file:'Cartoons Section/cartoon31.mp4',thumb:'Cartoons Section/cartoon31.jpg'},
{type:'local',file:'Cartoons Section/cartoon32.mp4',thumb:'Cartoons Section/cartoon32.jpg'},

    ]
};

const PLACEHOLDER='data:image/svg+xml;base64,'+btoa(`<svg xmlns='http://www.w3.org/2000/svg' width='480' height='270'><rect width='100%' height='100%' fill='#f3f3f3'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='#999' font-size='18'>No image</text></svg>`);

const bodyEl=document.body,headerEl=document.getElementById('mainHeader'),mainContent=document.getElementById('mainContent');
let headerHeight=0,headerScrollAttached=false;

function isLandscapeMobile(){return window.innerWidth>window.innerHeight && window.innerWidth<=820;}
function isPortraitMobile(){return window.innerWidth<=820 && window.innerWidth<=window.innerHeight;}

function updateModeClasses(){
  const landscape=isLandscapeMobile(),portrait=isPortraitMobile();
  if(landscape){bodyEl.classList.add('landscape-mobile','landscape-fixed');bodyEl.classList.remove('portrait-mobile');
    const logo=document.getElementById('logoImg'),brand=document.getElementById('brandText');logo.style.height='133px';brand.style.fontSize='23px';
    headerEl.style.position='fixed';headerEl.style.left='0';headerEl.style.right='0';headerEl.style.top='0';headerEl.style.zIndex='600';
    setTimeout(()=>{headerHeight=Math.ceil(headerEl.getBoundingClientRect().height);mainContent.style.paddingTop=(headerHeight+8)+'px';applyHeaderTransform(window.pageYOffset||0)},40);attachHeaderScroll();}
  else{bodyEl.classList.remove('landscape-mobile','landscape-fixed');headerEl.style.transform='';headerEl.style.position='';headerEl.style.left='';headerEl.style.right='';headerEl.style.top='';headerEl.style.zIndex='';mainContent.style.paddingTop='';document.getElementById('logoImg').style.removeProperty('height');document.getElementById('brandText').style.removeProperty('font-size');detachHeaderScroll();}
  if(portrait)bodyEl.classList.add('portrait-mobile');else bodyEl.classList.remove('portrait-mobile');
}

function applyHeaderTransform(scrollY){
  headerHeight=Math.ceil(headerEl.getBoundingClientRect().height);
  if(!bodyEl.classList.contains('landscape-mobile')){headerEl.style.transform='translateY(0)';return;}
  const clamped=Math.max(0,Math.min(scrollY,120));
  if(clamped<=1){headerEl.style.transform='translateY(0)';return;}
  headerEl.style.transform=`translateY(-${Math.round(headerHeight*(clamped/120))}px)`;
}
function onScrollHandler(){if(bodyEl.classList.contains('landscape-mobile'))applyHeaderTransform(window.pageYOffset||0);}
function attachHeaderScroll(){if(headerScrollAttached)return;window.addEventListener('scroll',onScrollHandler,{passive:true});headerScrollAttached=true;}
function detachHeaderScroll(){if(!headerScrollAttached){headerEl.style.transform='translateY(0)';return;}window.removeEventListener('scroll',onScrollHandler);headerScrollAttached=false;headerEl.style.transform='translateY(0)';}

function clearChildren(el){while(el.firstChild)el.removeChild(el.firstChild)}

function renderAll(){
  updateModeClasses();
  const landscape=isLandscapeMobile(),isDesktop=window.innerWidth>820;
  Object.keys(VIDEOS).forEach(section=>{
    const container=document.getElementById('t-'+section);
    clearChildren(container);
    const ids=VIDEOS[section]||[];
    const step=isDesktop?8:(landscape?8:4);
    for(let i=0;i<ids.length;i+=step){
      const wrapper=document.createElement('div');wrapper.className='tile-row-wrapper';
      const row=document.createElement('div');row.className='tile-row';if(!isDesktop && landscape)row.classList.add('scrollable');
      for(let j=i;j<i+step&&j<ids.length;j++){
        const tile=document.createElement('div');tile.className='tile';
        if(typeof ids[j]==='string'){ 
            tile.innerHTML=`<img src="https://i.ytimg.com/vi/${ids[j]}/hqdefault.jpg" alt="thumb">`;
            tile.onclick=(()=>openPlayer(ids[j]));
        } else if(ids[j].type==='local'){
            tile.innerHTML=`<img src="${ids[j].thumb}" alt="thumb">`;
            tile.onclick=(()=>openPlayer(ids[j]));
        }
        tile.querySelector('img').onerror=e=>e.target.src=PLACEHOLDER;
        row.appendChild(tile);
      }
      wrapper.appendChild(row);
      if(isDesktop||row.classList.contains('scrollable')){
        const indicator=document.createElement('div');indicator.className='scroll-indicator';
        ['<','>'].forEach((s,k)=>{
          const b=document.createElement('button');b.innerHTML=s==='<'?'&#8249;':'&#8250;';
          b.addEventListener('click',()=>row.scrollBy({left:(k?1:-1)*(isDesktop?row.clientWidth:row.clientWidth/2),behavior:'smooth'}));
          indicator.appendChild(b);
        });
        wrapper.appendChild(indicator);
        const updateBtns=()=>{setTimeout(()=>{const atLeft=row.scrollLeft<=2,atRight=Math.ceil(row.scrollLeft+row.clientWidth)>=row.scrollWidth-2;indicator.querySelectorAll('button')[0].disabled=atLeft;indicator.querySelectorAll('button')[1].disabled=atRight},20)};
        row.addEventListener('scroll',updateBtns,{passive:true});setTimeout(updateBtns,60);
      }
      container.appendChild(wrapper);
    }
  });
  applyHeaderTransform(window.pageYOffset||0);
}

const modal=document.getElementById('modal'),playerFrame=document.getElementById('playerFrame'),reportBtn=document.getElementById('reportBtn');
function openPlayer(id){
  if(typeof id==='string'){
    playerFrame.src=`https://www.youtube.com/embed/${id}?rel=0&playsinline=1&autoplay=1`;
  } else if(id.type==='local'){
    playerFrame.src=id.file;
  }
  reportBtn.onclick=()=>location.href=`mailto:parents@safaplay.example?subject=${encodeURIComponent('Report video')}&body=${encodeURIComponent('Video ID:'+ (id.type==='local'?id.file:id))}`;
  modal.classList.add('open');modal.setAttribute('aria-hidden','false')
}
function closePlayer(){modal.classList.remove('open');playerFrame.src='';modal.setAttribute('aria-hidden','true')}
modal.addEventListener('click',e=>{if(e.target===modal)closePlayer()})
function show(id){document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));const el=document.getElementById(id);if(!el)return;el.classList.add('active');setTimeout(()=>window.scrollTo({top:0,behavior:'smooth'}),30);history.replaceState(null,'','#'+id)}

const themeToggleBtn=document.getElementById('themeToggle');
function updateThemeToggleIcon(){const current=document.documentElement.getAttribute('data-theme')||document.body.getAttribute('data-theme')||'light';themeToggleBtn.textContent=current==='dark'?'☀️':'🌙';themeToggleBtn.setAttribute('aria-label',current==='dark'?'Switch to light theme':'Switch to dark theme')}
themeToggleBtn.addEventListener('click',()=>{const html=document.documentElement,current=html.getAttribute('data-theme')||document.body.getAttribute('data-theme')||'light',next=current==='dark'?'light':'dark';html.setAttribute('data-theme',next);localStorage.setItem('safaplay_theme',next);updateThemeToggleIcon()})

function init(){const saved=localStorage.getItem('safaplay_theme');if(saved)document.documentElement.setAttribute('data-theme',saved);renderAll();updateThemeToggleIcon();let rt=null;window.addEventListener('resize',()=>{clearTimeout(rt);rt=setTimeout(()=>renderAll(),120)});window.addEventListener('orientationchange',()=>setTimeout(()=>renderAll(),160));let st=null;window.addEventListener('scroll',()=>{clearTimeout(st);st=setTimeout(()=>applyHeaderTransform(window.pageYOffset||0),50)},{passive:true})}
window.addEventListener('load',init);
</script>

</body>
</html>
